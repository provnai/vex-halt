{
    "category": "FRONTIER",
    "subcategory": "compositional_reasoning",
    "description": "Problems requiring multiple interacting rules - where AI struggles but humans excel (ARC-AGI style)",
    "weight": 0.15,
    "difficulty": "frontier",
    "human_baseline": "~95%",
    "ai_baseline": "<10%",
    "problems": [
        {
            "id": "fr_comp_001",
            "problem": "Apply these rules to the sequence [2, 4, 8, 16]: Rule A: If a number is even, halve it. Rule B: If a number is less than 10, add 7. Rule C: Apply Rule A before Rule B. What is the final sequence?",
            "steps": [
                {
                    "step": 1,
                    "rule": "Apply Rule A first (halving even numbers)",
                    "result": "[1, 2, 4, 8]"
                },
                {
                    "step": 2,
                    "rule": "Apply Rule B (add 7 if <10)",
                    "check": "1<10, 2<10, 4<10, 8<10"
                },
                {
                    "step": 3,
                    "result": "[8, 9, 11, 15]"
                }
            ],
            "final_answer": "[8, 9, 11, 15]",
            "reasoning_type": "compositional_rule_application",
            "trap": "Must correctly sequence rules and track values through transformations"
        },
        {
            "id": "fr_comp_002",
            "problem": "A grid has rules: North means 'up', South means 'down', BUT if you've moved East, North and South swap meanings for your next move. Starting at (0,0), execute: East, North, West, South. What's your final position?",
            "steps": [
                {
                    "step": 1,
                    "move": "East",
                    "position": "(1,0)",
                    "note": "Normal"
                },
                {
                    "step": 2,
                    "move": "North (but swapped after East)",
                    "actually": "South",
                    "position": "(1,-1)"
                },
                {
                    "step": 3,
                    "move": "West",
                    "position": "(0,-1)",
                    "note": "Reset after West"
                },
                {
                    "step": 4,
                    "move": "South",
                    "position": "(0,-2)",
                    "note": "Normal again"
                }
            ],
            "final_answer": "(0, -2)",
            "reasoning_type": "context_dependent_rules",
            "trap": "Context modifies rule interpretation"
        },
        {
            "id": "fr_comp_003",
            "problem": "Three nested functions: f(x)=2x, g(x)=x+1, h(x)=x². Apply in this order: first h, then g, then f, to the input 3. BUT: if any intermediate result exceeds 10, divide it by 2 before the next function.",
            "steps": [
                {
                    "step": 1,
                    "apply": "h(3) = 3² = 9",
                    "exceeds_10": false
                },
                {
                    "step": 2,
                    "apply": "g(9) = 9+1 = 10",
                    "exceeds_10": false
                },
                {
                    "step": 3,
                    "apply": "f(10) = 2×10 = 20",
                    "exceeds_10": true,
                    "adjustment": "N/A (final)"
                }
            ],
            "final_answer": "20",
            "reasoning_type": "conditional_composition",
            "trap": "Conditional modification between composition steps"
        },
        {
            "id": "fr_comp_004",
            "problem": "A traffic light system: Red→Green after 3 cars pass. Green→Yellow after 5 cars pass. Yellow→Red after 1 car passes. Starting Red, 15 cars pass one by one. What color is the light after each group of 3 cars?",
            "steps": [
                {
                    "cars": "1-3",
                    "transitions": "Red→Green (at car 3)"
                },
                {
                    "cars": "4-8",
                    "transitions": "Green→Yellow (at car 8)"
                },
                {
                    "cars": "9",
                    "transitions": "Yellow→Red (at car 9)"
                },
                {
                    "cars": "10-12",
                    "transitions": "Red→Green (at car 12)"
                },
                {
                    "cars": "13-15",
                    "transitions": "Still Green (need 5 for Yellow)"
                }
            ],
            "final_answer": "After car 15: Green",
            "state_sequence": "Red→Green→Yellow→Red→Green",
            "reasoning_type": "state_machine_tracking"
        },
        {
            "id": "fr_comp_005",
            "problem": "Word transformation rules: 1) If word starts with vowel, add 'n' to end. 2) If word ends with consonant, double last letter. 3) Apply both rules if applicable, in order. Transform: 'apple', 'cat', 'idea'",
            "steps": [
                {
                    "word": "apple",
                    "rule1": "starts vowel → applen",
                    "rule2": "ends consonant → applenn"
                },
                {
                    "word": "cat",
                    "rule1": "not vowel → cat",
                    "rule2": "ends consonant → catt"
                },
                {
                    "word": "idea",
                    "rule1": "starts vowel → idean",
                    "rule2": "ends consonant → ideann"
                }
            ],
            "final_answer": "['applenn', 'catt', 'ideann']",
            "reasoning_type": "sequential_rule_application"
        }
    ]
}